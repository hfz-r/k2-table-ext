(this["webpackJsonpk2-table-ext-2"]=this["webpackJsonpk2-table-ext-2"]||[]).push([[4],{36:function(e,t,n){"use strict";n.r(t);var c=n(5),r=n(3),a=n(19),o=n(0),s=n.n(o),i=n(22),l=function(e){var t,n="pending",c=e.then((function(e){n="success",t=e}),(function(e){n="error",t=e}));return{read:function(){if("pending"===n)throw c;if("error"===n)throw t;if("success"===n)return t}}};var u=n(23),d=n(32),j=n(33),b=n(1),p=function(e,t,n){return Object(j.a)(e,n,{keys:[function(e){return e.values[t]}]})};p.autoRemove=function(e){return!e};var g=function(){return Object(b.jsx)("div",{className:"header-filter-settings",children:Object(b.jsx)("svg",{tabIndex:"0",width:"14",height:"14",viewBox:"0 0 14 14",className:"header-filter-settings-icon",children:Object(b.jsx)("path",{fillRule:"evenodd",d:"M13.222 2H.778C.348 2 0 1.552 0 1s.348-1 .778-1h12.444c.43 0 .778.448.778 1s-.348 1-.778 1zM1.556 3.111l3.888 4.667v5.444c0 .43.349.778.778.778h1.556c.43 0 .778-.348.778-.778V7.778l3.888-4.667H1.556z"})})})},h=function(e){var t=e.column,n=t.filterValue,c=t.preFilteredRows,r=t.setFilter,a=c.length;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"header-filter filter-text-input",children:Object(b.jsx)("input",{className:"text-input__input",value:n||"",onChange:function(e){return r(e.target.value||void 0)},placeholder:"Search ".concat(a," records")})}),Object(b.jsx)(g,{})]})},O=function(e){var t=e.column,n=t.filterValue,c=void 0===n?[]:n,r=t.preFilteredRows,s=t.setFilter,i=t.id,l=Object(o.useMemo)((function(){var e=r.length?r[0].values[i]:0,t=r.length?r[0].values[i]:0;return r.forEach((function(n){e=Math.min(n.values[i],e),t=Math.max(n.values[i],t)})),[e,t]}),[i,r]),u=Object(a.a)(l,2),d=u[0],j=u[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"header-filter filter-text-input",children:[Object(b.jsx)("input",{className:"text-input__input",value:c[0]||"",type:"number",onChange:function(e){var t=e.target.value;s((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[t?parseInt(t,10):void 0,e[1]]}))},placeholder:"Min (".concat(d,")"),style:{width:"70px",marginRight:"0.5rem"}}),"to",Object(b.jsx)("input",{className:"text-input__input",value:c[1]||"",type:"number",onChange:function(e){var t=e.target.value;s((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[e[0],t?parseInt(t,10):void 0]}))},placeholder:"Max (".concat(j,")"),style:{width:"70px",marginLeft:"0.5rem"}})]}),Object(b.jsx)(g,{})]})},x=function(e){var t=e.column,n=t.filterValue,c=t.preFilteredRows,r=t.setFilter,a=t.id,o=s.a.useMemo((function(){var e=new Set;return c.forEach((function(t){e.add(t.values[a])})),Object(d.a)(e.values())}),[a,c]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"header-filter filter-text-input",children:Object(b.jsxs)("select",{className:"text-input__input",value:n,onChange:function(e){r(e.target.value||void 0)},children:[Object(b.jsx)("option",{value:"",children:"All"}),o.map((function(e,t){return Object(b.jsx)("option",{value:e,children:e},t)}))]})}),Object(b.jsx)(g,{})]})},v=function(e){var t=e.gotoPage,n=e.previousPage,c=e.nextPage,r=e.canPreviousPage,a=e.canNextPage,o=e.pageCount,s=e.pageIndex,i=e.pageOptions,l=e.pageSize,u=e.setPageSize;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"pagination",children:[Object(b.jsx)("button",{type:"button",onClick:function(){return t(0)},disabled:!r,children:"<<"})," ",Object(b.jsx)("button",{type:"button",onClick:function(){return n()},disabled:!r,children:"<"})," ",Object(b.jsx)("button",{type:"button",onClick:function(){return c()},disabled:!a,children:">"})," ",Object(b.jsx)("button",{type:"button",onClick:function(){return t(o-1)},disabled:!a,children:">>"})," ",Object(b.jsxs)("span",{children:["Page"," ",Object(b.jsxs)("strong",{children:[s+1," of ",i.length]})," "]}),Object(b.jsxs)("span",{children:["| Go to page:"," ",Object(b.jsx)("input",{type:"number",defaultValue:s+1,onChange:function(e){var n=e.target.value?Number(e.target.value)-1:0;t(n)},style:{width:"100px"}})]})," ",Object(b.jsx)("select",{value:l,onChange:function(e){u(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return Object(b.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})})},f=n(31),m=n(34),C=Object(o.forwardRef)((function(e,t){var n=e.indeterminate,c=Object(m.a)(e,["indeterminate"]),a=Object(o.useRef)(),s=t||a;return Object(o.useEffect)((function(){s.current.indeterminate=n}),[s,n]),Object(b.jsx)("input",Object(r.a)({type:"checkbox",ref:s},c))})),w="k2-table-ext-menu",y=function(e){var t=e.column,n=Object(o.useRef)(null),c=Object(o.useRef)(null),r=Object(o.useState)(!1),s=Object(a.a)(r,2),i=s[0],l=s[1],u=Object(o.useCallback)((function(e){var t;i&&!(null===c||void 0===c||null===(t=c.current)||void 0===t?void 0:t.contains(e.target))&&l(!1)}),[i]);return Object(o.useEffect)((function(){return document.addEventListener("click",u),function(){document.removeEventListener("click",u)}}),[u]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(f.b,{id:w,ref:n,name:t.Header,attributes:{"data-tooltip":"Right/left click to see the menu",className:"k2-table-ext-menu-group--disabled"},column:t,collect:function(e){return e},onMenuClick:function(e,t,n){n.setAttribute("data-tooltip","".concat(t.item," on column ").concat(t.name))},children:Object(b.jsx)("div",{ref:c,role:"presentation",className:"header-menu header-menu--hover ".concat(i?"header-menu--visible":""),onClick:function(e){l(!0),n&&(e.stopPropagation(),n.current.handleContextClick(e))},children:Object(b.jsx)("svg",{width:"14",height:"12",viewBox:"0 0 14 12",className:"sort-icon-desc",children:Object(b.jsxs)("g",{fillRule:"evenodd",children:[Object(b.jsx)("rect",{width:"14",height:"2",rx:"1"}),Object(b.jsx)("rect",{width:"14",height:"2",y:"5",rx:"1"}),Object(b.jsx)("rect",{width:"14",height:"2",y:"10",rx:"1"})]})})})})})},P=Object(f.e)(w)((function(e){var t=e.id,n=e.columns,c=e.toggleAll,a=e.trigger,o=a?a.column:null,s=a?a.onMenuClick:null;return Object(b.jsxs)(f.a,{id:t,children:[o&&o.canGroupBy?Object(b.jsx)("span",Object(r.a)(Object(r.a)({},o.getGroupByToggleProps()),{},{children:Object(b.jsx)(f.c,{data:{item:o.isGrouped?"Ungroup":"Group"},onClick:s,children:o.isGrouped?"Ungroup":"Group"})})):null,a&&Object(b.jsx)(f.c,{divider:!0}),a&&Object(b.jsxs)(f.d,{title:"Columns",preventCloseOnClick:!0,children:[Object(b.jsxs)(f.c,{preventClose:!0,children:[Object(b.jsx)(C,Object(r.a)({},c()))," Toggle All"]}),n.map((function(e,t){return"expander"!==e.id&&Object(b.jsx)(f.c,{preventClose:!0,children:Object(b.jsxs)("label",{htmlFor:"checkbox",children:[Object(b.jsx)("input",Object(r.a)({type:"checkbox"},e.getToggleHiddenProps()))," ",e.Header]})},"item-".concat(t))}))]})]})})),S=function(e){var t=e.columns,n=e.data,c=e.updateData,a=e.skipReset,i=e.renderSubComponent,l=Object(o.useMemo)((function(){return{fuzzyText:p,text:function(e,t,n){return e.filter((function(e){var c=e.values[t];return void 0===c||String(c).toLocaleLowerCase().startsWith(String(n).toLocaleLowerCase())}))}}}),[]),d=Object(o.useMemo)((function(){return{Filter:h}}),[]),j=Object(u.useTable)({columns:t,data:n,defaultColumn:d,filterTypes:l,updateData:c,autoResetPage:!a,autoResetSelectedRows:!a,disableMultiSort:!0},u.useFilters,u.useGroupBy,u.useSortBy,u.useExpanded,u.usePagination),g=j.getTableProps,O=j.getTableBodyProps,x=j.headerGroups,f=j.page,m=j.prepareRow,C=j.canPreviousPage,w=j.canNextPage,S=j.pageOptions,N=j.pageCount,R=j.gotoPage,k=j.nextPage,H=j.previousPage,T=j.setPageSize,F=j.toggleHideColumn,M=j.visibleColumns,A=j.allColumns,B=j.getToggleHideAllColumnsProps,I=j.state,D=I.pageIndex,E=I.pageSize,z=I.groupBy;return Object(o.useEffect)((function(){F("expander",!!z.length)}),[z,F]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(P,{columns:A,toggleAll:B}),Object(b.jsx)("div",{className:"tableWrap",children:Object(b.jsxs)("table",Object(r.a)(Object(r.a)({},g()),{},{children:[Object(b.jsx)("thead",{children:x.map((function(e){return Object(b.jsx)("tr",Object(r.a)(Object(r.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e,t){return Object(b.jsx)("th",Object(r.a)(Object(r.a)({},e.getHeaderProps({className:e.collapse?"collapse":""})),{},{children:Object(b.jsxs)("div",{className:"column-wrapper",children:[Object(b.jsxs)("div",{className:"column-header",children:[Object(b.jsxs)("div",Object(r.a)(Object(r.a)({},e.getSortByToggleProps()),{},{className:"header-content",children:[e.render("Header"),Object(b.jsx)("div",{className:"sort-icon-wrapper",children:e.isSorted?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("svg",{width:"10",height:"5",viewBox:"0 0 10 5",className:"sort-icon sort-icon--asc ".concat(!e.isSortedDesc&&"sort-icon--active"),children:Object(b.jsx)("path",{fillRule:"evenodd",d:"M4.767.276L8.395 4.04c.142.147.138.382-.01.524-.069.066-.16.104-.257.104H.872c-.205 0-.37-.166-.37-.37 0-.097.036-.189.103-.258L4.233.276c.142-.147.377-.151.524-.009l.01.01z"})}),Object(b.jsx)("svg",{width:"10",height:"5",viewBox:"0 0 10 5",className:"sort-icon sort-icon--desc ".concat(e.isSortedDesc&&"sort-icon--active"),children:Object(b.jsx)("path",{fillRule:"evenodd",d:"M4.233 4.724L.605.96C.463.814.467.579.615.437.684.371.775.333.872.333h7.256c.205 0 .37.166.37.37 0 .097-.036.189-.103.258L4.767 4.724c-.142.147-.377.151-.524.009l-.01-.01z"})})]}):""})]})),"expander"!==e.id&&Object(b.jsx)(y,{column:e},"menu-".concat(t))]}),Object(b.jsx)("div",{className:"header-filter-wrapper",children:e.canFilter?e.render("Filter"):null})]})}),"headercol-".concat(t))}))}),"headerrow-".concat(e.key))}))}),Object(b.jsx)("tbody",Object(r.a)(Object(r.a)({},O()),{},{children:f.map((function(e){m(e);var t=e.getRowProps();return Object(b.jsxs)(s.a.Fragment,{children:[Object(b.jsx)("tr",Object(r.a)(Object(r.a)({},t),{},{children:e.cells.map((function(t,n){return Object(b.jsx)("td",Object(r.a)(Object(r.a)({},t.getCellProps({className:t.column.collapse?"collapse":""})),{},{children:t.isGrouped?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",Object(r.a)(Object(r.a)({},e.getToggleRowExpandedProps()),{},{children:e.isExpanded?"\ud83d\udd3d ":"\u25b6\ufe0f "})),t.render("Cell")," (",e.subRows.length,")"]}):t.isAggregated?t.render("Aggregated"):t.isPlaceholder?null:t.render("Cell")}),"bodycol-".concat(n))}))})),e.isExpanded&&i({row:e,visibleColumns:M})]},"bodyrow-".concat(t.key))}))}))]}))}),Object(b.jsx)(v,{gotoPage:R,previousPage:H,nextPage:k,canPreviousPage:C,canNextPage:w,pageCount:N,pageIndex:D,pageOptions:S,pageSize:E,setPageSize:T})]})},N=function(e){e.parentRow;var t=e.childData,n=Object(o.useMemo)((function(){return[{Header:"Id",accessor:"Id"},{Header:"COA",accessor:"COA"},{Header:"Type",accessor:"Type"},{Header:"Currency",accessor:"Currency"},{Header:"AMC",accessor:"AMC"},{Header:"Channel",accessor:"Channel"},{Header:"Agent",accessor:"Agent"},{Header:"Plan",accessor:"Plan"},{Header:"DrCr",accessor:"DrCr"}]}),[]),c=Object(u.useTable)({columns:n,data:t},u.useSortBy),a=c.getTableProps,s=c.getTableBodyProps,i=c.headerGroups,l=c.rows,d=c.prepareRow;return Object(b.jsxs)("table",Object(r.a)(Object(r.a)({},a()),{},{style:{width:"80%",marginLeft:"auto",marginRight:"auto",backgroundColor:"floralwhite"},children:[Object(b.jsx)("thead",{children:i.map((function(e){return Object(b.jsx)("tr",Object(r.a)(Object(r.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e,t){return Object(b.jsx)("th",Object(r.a)(Object(r.a)({},e.getHeaderProps()),{},{children:Object(b.jsx)("div",{className:"column-wrapper",children:Object(b.jsx)("div",{className:"column-header",children:Object(b.jsxs)("div",Object(r.a)(Object(r.a)({},e.getSortByToggleProps()),{},{className:"header-content",children:[e.render("Header"),Object(b.jsx)("div",{className:"sort-icon-wrapper",children:e.isSorted?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("svg",{width:"10",height:"5",viewBox:"0 0 10 5",className:"sort-icon sort-icon--asc ".concat(!e.isSortedDesc&&"sort-icon--active"),children:Object(b.jsx)("path",{fillRule:"evenodd",d:"M4.767.276L8.395 4.04c.142.147.138.382-.01.524-.069.066-.16.104-.257.104H.872c-.205 0-.37-.166-.37-.37 0-.097.036-.189.103-.258L4.233.276c.142-.147.377-.151.524-.009l.01.01z"})}),Object(b.jsx)("svg",{width:"10",height:"5",viewBox:"0 0 10 5",className:"sort-icon sort-icon--desc ".concat(e.isSortedDesc&&"sort-icon--active"),children:Object(b.jsx)("path",{fillRule:"evenodd",d:"M4.233 4.724L.605.96C.463.814.467.579.615.437.684.371.775.333.872.333h7.256c.205 0 .37.166.37.37 0 .097-.036.189-.103.258L4.767 4.724c-.142.147-.377.151-.524.009l-.01-.01z"})})]}):""})]}))})})}),"headercol-".concat(t))}))}),"headerrow-".concat(e.key))}))}),Object(b.jsx)("tbody",Object(r.a)(Object(r.a)({},s()),{},{children:l.map((function(e,t){return d(e),Object(o.createElement)("tr",Object(r.a)(Object(r.a)({},e.getRowProps()),{},{key:"bodyrow-".concat(t)}),e.cells.map((function(e,t){return Object(b.jsx)("td",Object(r.a)(Object(r.a)({},e.getCellProps()),{},{children:e.render("Cell")}),"bodycol-".concat(t))})))}))}))]}))},R=function(e){var t=e.parentRow,n=e.parentVisibleColumns,c=e.data,r=s.a.useState(!0),i=Object(a.a)(r,2),l=i[0],u=i[1],d=Object(o.useState)([]),j=Object(a.a)(d,2),p=j[0],g=j[1];return Object(o.useEffect)((function(){var e=setTimeout((function(){g(c),u(!1)}),500);return function(){clearTimeout(e)}}),[c]),l?Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:n.length,children:Object(b.jsx)("div",{children:"\u23f3"})})}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:n.length,children:Object(b.jsx)(N,{parentRow:t,childData:p})})})})},k=function(){var e=new Promise((function(e){fetch("payload.json",{headers:{"Content-Type":"application/json"}}).then((function(t){console.log("fetched payload"),e(t.json())}))}));return{payload:l(e)}}();t.default=function(e){var t=Object(o.useState)(k),n=Object(a.a)(t,2),s=n[0],l=n[1],u=Object(o.useRef)(!1);Object(o.useEffect)((function(){u.current=!1}),[s]);var d=Object(o.useMemo)((function(){return[{id:"expander",Header:function(){return null},Cell:function(e){var t=e.row;return Object(b.jsx)("span",Object(r.a)(Object(r.a)({},t.getToggleRowExpandedProps()),{},{children:t.isExpanded?"\u2796":"\u2795"}))},SubCell:function(){return null},Aggregated:function(){return null},collapse:!0},{Header:"InvestorID",accessor:"parent.InvestorID",aggregate:"count",Aggregated:function(e){var t=e.value;return"".concat(t," investor ids")}},{Header:"InvestorName",accessor:"parent.InvestorName",aggregate:"count",Aggregated:function(e){var t=e.value;return"".concat(t," investor names")},filter:"fuzzyText"},{Header:"SetupType",accessor:"parent.SetupType",aggregate:"count",Aggregated:function(e){var t=e.value;return"".concat(t," types")},filter:"includes",Filter:x},{Header:"SetupDate",accessor:"parent.SetupDate",aggregate:"count",Aggregated:function(e){var t=e.value;return"".concat(t," setup date")},filter:"between",Filter:O,collapse:!0},{Header:"SetupBy",accessor:"parent.SetupBy",aggregate:"count",Aggregated:function(e){var t=e.value;return"".concat(t," setup-by")}}]}),[]),j=function(e){var t=e.value;return Object(i.chain)(t).groupBy((function(e){return e.InvestorID})).map((function(e){return{parent:(t=e[0],Object(i.pick)(t,["InvestorID","InvestorName","SetupType","SetupDate","SetupBy"])),children:e};var t})).value()}(s.payload.read()),p=Object(o.useCallback)((function(e){var t=e.row,n=e.visibleColumns;return n.find((function(e){return"expander"===e.id}))?Object(b.jsx)(R,{parentRow:t,parentVisibleColumns:n,data:Object(i.reduce)(j,(function(e,n,c){return Object(i.isEqual)(c,parseInt(t.id,10))?e.concat(n.children):e}),[])}):void 0}),[j]);return Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(S,Object(r.a)({columns:d,data:j,updateData:function(e,t,n){u.current=!0,l((function(a){return a.map((function(a,o){return o===e?Object(r.a)(Object(r.a)({},a),{},Object(c.a)({},t,n)):a}))}))},skipReset:u.current,renderSubComponent:p},e))})}}}]);
//# sourceMappingURL=4.6b86711a.chunk.js.map